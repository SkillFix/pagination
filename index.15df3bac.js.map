{"mappings":"AAAA,MAGMA,EAAU,CACdC,QAAS,CACPC,cALY,qCCGhB,MAAMC,EAAO,CACXC,WAAYC,SAASC,cAAc,gBACnCC,kBAAmBF,SAASC,cAAc,wBAC1CE,SAAUH,SAASC,cAAc,4BAG7BG,EAAiB,IDAR,MAMTC,YACF,OAAOC,KAAKC,W,CAGVF,UAAMG,GACRF,KAAKC,YAAcC,C,CAGrBC,gBACE,MAAMC,EAAM,uCAA4BJ,KAAKC,gCAAgCD,KAAKK,OAElF,OAAOC,MAAMF,EAAKf,GACfkB,MAAKC,GAAYA,EAASC,SAC1BF,MAAK,EAACG,SAAEA,MACPV,KAAKK,MAAQ,EACNK,KAERC,OAAMC,GAASC,QAAQC,IAAIF,I,CAEhCG,YACEf,KAAKK,KAAO,C,CAzBdW,cACEhB,KAAKC,YAAc,GACnBD,KAAKK,KAAO,C,GCFVY,EAAc,ICVL,MAKbC,QAAQC,GACN,MAAMC,EAAO,GAGb,OAFAA,EAAKC,OAAS3B,SAASC,cAAcwB,GACrCC,EAAKE,MAAQF,EAAKC,OAAO1B,cAAc,UAChCyB,C,CAETG,OACEvB,KAAKoB,KAAKC,OAAOG,UAAUC,IAAI,Y,CAEjCC,OACE1B,KAAKoB,KAAKC,OAAOG,UAAUG,OAAO,Y,CAEpCC,UACE5B,KAAKoB,KAAKE,MAAMO,YAAc,eACrB7B,KAAJoB,KAAKC,OAAOS,UAAW,C,CAE9BC,SACE/B,KAAKoB,KAAKE,MAAMO,YAAc,eAC9B7B,KAAKoB,KAAKC,OAAOS,UAAW,C,CAtB9Bd,aAAYG,SAAEA,EAAQa,OAAEA,GAAS,IAC/BhC,KAAKoB,KAAOpB,KAAKkB,QAAQC,GACzBa,GAAUhC,KAAKuB,M,GDOiB,CAClCJ,SAAU,0BACVa,QAAQ,IAuBV,SAASC,IACPhB,EAAYW,UACZ9B,EAAeK,gBAAgBI,MAAKG,KAMtC,SAAsBA,GACpB,MAAMwB,EAASxB,EACZyB,KAAIC,GACI,6BACSA,EAAEC,8DAEID,EAAEE,8EACRF,EAAEG,6CACQH,EAAEI,kCACbJ,EAAEK,iFAKlBC,KAAK,IACRlD,EAAKI,kBAAkB+C,mBAAmB,YAAaT,E,CApBrDU,CAAalC,GACbO,EAAYc,QAAQ,G,CAxBxBd,EAAYc,SAEZvC,EAAKC,WAAWoD,iBAAiB,UAGjC,SAAkBT,GAKhB,GAJAA,EAAEU,iBAEFhD,EAAeC,MAAQqC,EAAEW,cAAcC,SAASjD,MAAMkD,MAEzB,KAAzBnD,EAAeC,MACjB,OAAOmD,MAAM,6BAGfjC,EAAYS,OACZ5B,EAAeiB,YACfvB,EAAKI,kBAAkBuD,UAAY,GACnClB,G,IAdFzC,EAAKK,SAASgD,iBAAiB,QAASZ","sources":["src/news-service.js","src/index.js","src/load-more-btn.js"],"sourcesContent":["const API_KEY = '74b2bcb2578b464895f11a0434bf7741';\n// '0e64de205f82404ba9ad7b5c68460307',\nconst BASE_URL = 'https://newsapi.org/v2';\nconst options = {\n  headers: {\n    Authorization: API_KEY,\n  },\n};\n\nexport default class NewsApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n\n  fetchArticles() {\n    const URL = `${BASE_URL}/everything?q=${this.searchQuery}&pageSize=10&page=${this.page}`;\n\n    return fetch(URL, options)\n      .then(response => response.json())\n      .then(({ articles }) => {\n        this.page += 1;\n        return articles;\n      })\n      .catch(error => console.log(error));\n  }\n  resetPage() {\n    this.page = 1;\n  }\n}\n","import NewsApiService from './news-service';\nimport LoadMoreBtn from './load-more-btn';\n\nconst refs = {\n  searchForm: document.querySelector('#search-form'),\n  articlesContainer: document.querySelector('.articles__container'),\n  loadMore: document.querySelector('[data-action=load-more]'),\n};\n\nconst newsApiService = new NewsApiService();\nconst loadMoreBtn = new LoadMoreBtn({\n  selector: '[data-action=load-more]',\n  hidden: true,\n});\n\nloadMoreBtn.enable();\n\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.loadMore.addEventListener('click', fetchArticles);\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  newsApiService.query = e.currentTarget.elements.query.value;\n\n  if (newsApiService.query === '') {\n    return alert('Введите запрос для поиска');\n  }\n\n  loadMoreBtn.show();\n  newsApiService.resetPage();\n  refs.articlesContainer.innerHTML = '';\n  fetchArticles();\n}\n\nfunction fetchArticles() {\n  loadMoreBtn.disable();\n  newsApiService.fetchArticles().then(articles => {\n    renderMarkup(articles);\n    loadMoreBtn.enable();\n  });\n}\n\nfunction renderMarkup(articles) {\n  const markup = articles\n    .map(e => {\n      return `<li>\n           <a href=\"${e.url}\" >\n              <article>\n                <img src=\"${e.urlToImage}\" alt=\"\" width=\"480\" class='img-articles'/>\n                <h2>${e.title}</h2>\n                <p>Posted By: ${e.author}</p>\n                <p>${e.description}</p>\n              </article>\n            </a>\n          </li>`;\n    })\n    .join('');\n  refs.articlesContainer.insertAdjacentHTML('beforeend', markup);\n}\n","export default class LoadMoreBtn {\n  constructor({ selector, hidden = false }) {\n    this.refs = this.getRefs(selector);\n    hidden && this.hide();\n  }\n  getRefs(selector) {\n    const refs = {};\n    refs.button = document.querySelector(selector);\n    refs.label = refs.button.querySelector('.label');\n    return refs;\n  }\n  hide() {\n    this.refs.button.classList.add('is-hidden');\n  }\n  show() {\n    this.refs.button.classList.remove('is-hidden');\n  }\n  disable() {\n    this.refs.label.textContent = 'Загружаем...';\n    this.refs.button.disabled = true;\n  }\n  enable() {\n    this.refs.label.textContent = 'Показать еще';\n    this.refs.button.disabled = false;\n  }\n}\n"],"names":["$89836af1768d7250$var$options","headers","Authorization","$1f0dc3b9307be026$var$refs","searchForm","document","querySelector","articlesContainer","loadMore","$1f0dc3b9307be026$var$newsApiService","query","this","searchQuery","newQuery","fetchArticles","URL","page","fetch","then","response","json","articles","catch","error","console","log","resetPage","constructor","$1f0dc3b9307be026$var$loadMoreBtn","getRefs","selector","refs","button","label","hide","classList","add","show","remove","disable","textContent","disabled","enable","hidden","$1f0dc3b9307be026$var$fetchArticles","markup","map","e","url","urlToImage","title","author","description","join","insertAdjacentHTML","$1f0dc3b9307be026$var$renderMarkup","addEventListener","preventDefault","currentTarget","elements","value","alert","innerHTML"],"version":3,"file":"index.15df3bac.js.map"}